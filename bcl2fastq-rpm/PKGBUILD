# Maintainer: Clint Valentine <valentine.clint@gmail.com>

pkgname=bcl2fastq-rpm
pkgver=2.17.1.14
pkgrel=1
pkgdesc="Demultiplexes data and converts BCL files generated by Illumina sequencers to FASTQ for downstream analysis."
arch=('i686' 'x86_64')
url=https://support.illumina.com/downloads/"${pkgname//-rpm/}"-conversion-software-v"${pkgver//./-}".html
license=('custom')
depends=('rpmextract')
provides=('bcl2fastq-rpm')
conflicts=('bcl2fastq bcl2fastq-rpm')
source=(ftp://webdata2:webdata2@ussd-ftp.illumina.com/downloads/software/"${pkgname//-rpm/}"/"${pkgname//-rpm/}"2-v"${pkgver}"-Linux-x86_64.zip)
md5sums=('927f15930ae40392c718059d6147d1a3')

build() {
  cd "${srcdir}"

  rpmextract.sh "${pkgname//-rpm/}"2-v"${pkgver}"-Linux-x86_64.rpm
}

package() {
  mkdir -p "${pkgdir}"/usr/bin
  mkdir -p "${pkgdir}"/usr/share/licenses

  cp -r "${srcdir}"/usr/local/bin/bcl2fastq "${pkgdir}"/usr/bin/bcl2fastq

  install -Dm644 "${srcdir}"/usr/local/share/COPYRIGHT "${pkgdir}"/usr/share/licenses/"${pkgname//-rpm/}"/COPYRIGHT
}
